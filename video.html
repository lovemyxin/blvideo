<!doctype html>
<html>

	<head>
		<meta http-equiv=Content-Type content="text/html; charset=utf-8">
		<title></title>
		<meta name="viewport"
			content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.css" rel="stylesheet" />
	</head>

	<body>
		<script src="js/mui.js" type="text/javascript"></script>
		<script type="text/javascript">
			mui.init()
		</script>
		<style type="text/css">
			html,
			body {
				width: 100%;
				height: 100%;
			}

			.mui-content,
			video,
			.video-js {
				width: 100vw;
				height: 49.85vw;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="css/video-js.min.css">
		<script type="text/javascript" src="js/video.min.js"></script>

		<div class="mui-content">
			<video id="video" controls="true" autoplay preload="auto"
				class="video-js vjs-default-skin vjs-big-play-centered" poster="" data-setup="{}"
				webkit-playsinline='true' playsinline='true' x-webkit-airplay='true' x5-video-player-type='h5'
				x5-video-player-fullscreen='true' x5-video-ignore-metadata='true'>
			</video>
		</div>
	</body>

</html>

<script type="text/javascript">
	try {
		let params = window.location.href.split('?')[1].split('&');
		let m3u8 = params[0].split('=')[1];
		let source = "<source src='" + m3u8 + "' type='application/x-mpegURL' id='target' />";
		let title = params[1].split('=')[1];
		document.querySelector("video").innerHTML = source;
		document.title = window.decodeURIComponent(title);
	} catch {}

	var player = videojs('video', {
		"poster": "",
		"controls": true
	}, function() {
		this.on('play', function() {
			mui.toast('视频正在播放');
		});
		//暂停--播放完毕后也会暂停
		this.on('pause', function() {
			mui.toast("视频已经暂停");
		});
		// 结束
		this.on('ended', function() {
			mui.toast('视频播放完毕');
		})
	});
</script>
